---
title: 前端安全性问题
date: 2021-08-04
permalink: 
categories: 
  - JavaScript
tags: 
  - null
---
# XSS（代码注入攻击）
[XSS](https://segmentfault.com/a/1190000016551188)
HTTP-only cookie
```js
1. 注入的方法：
  1. 在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。
  2. 在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。
  3. 在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。
  4. 在标签的 href、src 等属性中，包含 javascript: 等可执行代码。
  5. 在 onload、onerror、onclick 等事件中，注入不受控制代码。
  6. 在 style 属性和标签中，包含类似 background-image:url("javascript:..."); 的代码（新版本浏览器已经可以防范）。
  7. 在 style 属性和标签中，包含类似 expression(...) 的 CSS 表达式代码（新版本浏览器已经可以防范）。
2. 分类
  1. 存储型 XSS
  2. 反射型 XSS
  3. DOM 型 XSS
3. 预防措施
  1. 利用模板引擎
  开启模板引擎自带的 HTML 转义功能。例如：
  在 ejs 中，尽量使用 <%= data %> 而不是 <%- data %>；
  在 doT.js 中，尽量使用 {{! data } 而不是 {{= data }；
  在 FreeMarker 中，确保引擎版本高于 2.3.24，并且选择正确的 freemarker.core.OutputFormat。
  2. 避免内联事件
  尽量不要使用 onLoad="onload('{{data}}')"、onClick="go('{{action}}')" 这种拼接内联事件的写法。在 JavaScript 中通过 .addEventlistener() 事件绑定会更安全。
  3. 避免拼接 HTML
  前端采用拼接 HTML 的方法比较危险，如果框架允许，使用 createElement、setAttribute 之类的方法实现。或者采用比较成熟的渲染框架，如 Vue/React 等。
  4. 时刻保持警惕
  在插入位置为 DOM 属性、链接等位置时，要打起精神，严加防范。
  5. 增加攻击难度，降低攻击后果
  通过 CSP、输入长度配置、接口安全措施等方法，增加攻击的难度，降低攻击的后果。
  6. 主动检测和发现
  可使用 XSS 攻击字符串和自动扫描工具寻找潜在的 XSS 漏洞。
```
# CSRF（跨站请求伪造）
[CSRF](https://segmentfault.com/a/1190000016659945)
```js
1. 攻击类型
  1. GET类型的CSRF
  2. POST类型的CSRF
  3. 链接类型的CSRF
2. 特点
  攻击一般发起在第三方网站，而不是被攻击的网站。被攻击的网站无法防止攻击发生。
  攻击利用受害者在被攻击网站的登录凭证，冒充受害者提交操作；而不是直接窃取数据。
  整个过程攻击者并不能获取到受害者的登录凭证，仅仅是“冒用”。
  跨站请求可以用各种方式：图片URL、超链接、CORS、Form提交等等。部分请求方式可以直接嵌入在第三方论坛、文章中，难以进行追踪。
3. 解决方法
  1. 阻止不明外域的访问
     1. 同源检测
        Origin Header
        Referer Header
     2. Samesite Cookie
  2. 提交时要求附加本域才能获取的信息
     1. CSRF Token
     2. 双重Cookie验证
```
[web 应用常见安全漏洞一览](https://segmentfault.com/a/1190000018004657)
# SQL注入
# DDoS 攻击(拒绝服务)
```js
1. 方法
   攻击者不断地提出服务请求，让合法用户的请求无法及时处理，这就是 DoS 攻击。
2. 解决方法
  限制单个用户的流量请求
```
# XXE漏洞
```js
XML 外部实体漏洞（XML External Entity）,当应用程序解析 XML 输入时，如果没有禁止外部实体的加载，导致可加载恶意外部文件和代码，就会造成任意文件读取、命令执行、内网端口扫描、攻击内网网站等攻击。
```
# JSON劫持
```js
将用户的信息用json传递过来，然后通过Object.prototype.__defineSetter__触发自己的恶意代码
```
# 暴力破解
```js
弱密码（Weak Password）很容易被别人（对你很了解的人等）猜到或被破解工具暴力破解。
1. 解决方案
密码复杂度要足够大，也要足够隐蔽
限制尝试次数
```
# XST攻击
```js
XST攻击（cross-site tracing）当Web服务器启用TRACE时，提交的请求头会在服务器响应Body中完整返回，其中HTTP头很可能包括Session Token、Cookies或其它认证信息，攻击者可以利用漏洞获取用户信息
```
# 信息泄露
```js
由于 Web 服务器或应用程序没有正确处理一些特殊请求，泄露 Web 服务器的一些敏感信息，如用户名、密码、源代码、服务器信息、配置信息等。
```
# 目录遍历漏洞
```js
攻击者向 Web 服务器发送请求，通过在 URL 中或在有特殊意义的目录中附加 ../、或者附加 ../ 的一些变形（如 ..\ 或 ..// 甚至其编码），导致攻击者能够访问未授权的目录，以及在 Web 服务器的根目录以外执行命令。
```
# 命令执行漏洞
```js
命令执行漏洞是通过 URL 发起请求，在 Web 服务器端执行未授权的命令，获取系统信息、篡改系统配置、控制整个系统、使系统瘫痪等。
```
# 文件上传漏洞
```js
如果对文件上传路径变量过滤不严，并且对用户上传的文件后缀以及文件类型限制不严，攻击者可通过 Web 访问的目录上传任意文件，包括网站后门文件（webshell），进而远程控制网站服务器。
所以一般需注意：
在开发网站及应用程序过程中，需严格限制和校验上传的文件，禁止上传恶意代码的文件
限制相关目录的执行权限，防范 webshell 攻击
```
# 其他漏洞
```js
SSLStrip 攻击
OpenSSL Heartbleed 安全漏洞
CCS 注入漏洞
证书有效性验证漏洞
```
# 框架漏洞