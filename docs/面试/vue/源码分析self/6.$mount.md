---
title: $mount
date: 2021-08-02
categories:
  - vue
tags:
  - vue
---
![avator](../images/$mount.jpg)
源码位置：'src/platforms/web/entry-runtime-with-compiler',
vue渲染过程我们必须知道vue有几种构建方式：
1. 独立构建 （包含template编译器）
渲染过程：html字符串 → render函数 → vnode → 真实dom节点
2. 运行中构建 （不包含template编译器）
渲染过程: render函数 → vnode → 真实dom节点
```js
功能：
1. mount方法保存在mount
mount.call(this, el, hydrating)
2. 编译功能
options中是否有render, 如果没有，需要获取模板，然后将模板编译成渲染函数，最后赋值给render
```
运行版：源码位置：'src/platforms/web/runtime/index.js'
```js
Vue.prototype.$mount = function (
  el?: string | Element,
  hydrating?: boolean
): Component {
  el = el && inBrowser ? query(el) : undefined
  return mountComponent(this, el, hydrating)
}
//lifecycle.js
mountComponent()
1. callHook(vm, 'beforeMount')
2. updateComponent===vm._update
3. new Watcher(vm, updateComponent, noop, {
    before () {
      if (vm._isMounted && !vm._isDestroyed) {
        callHook(vm, 'beforeUpdate')
      }
    }
  }, true /* isRenderWatcher */)
```