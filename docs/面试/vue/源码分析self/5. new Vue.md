---
title: new Vue
date: 2021-08-02
categories:
  - vue
tags:
  - vue
---
# 父子两个组件同时定义了beforeCreate、created、beforeMounte、mounted四个钩子，它们的执行顺序是怎么样的？
```js
parent beforeCreate
parent created
parent beforeMounte
    child beforeCreate
    child created
    child beforeMounte
    child mounted
parent mounted
```
源码位置：src/core/instance/init.js
# _init
1. 参数的初始化
_uid _isVue
2. 合并options
mergeOptions
3. initProxy
4. 初始化一些函数 
    vm._self = vm
    initLifecycle(vm)
    initEvents(vm)
    initRender(vm)
    callHook(vm, 'beforeCreate')
    initInjections(vm) // resolve injections 
    initState(vm)---------------------->initProps、initMethods、initData、initComputed、initWatch
    ```js
    如何将_data绑定在vm上？
    1. initData()中
    data = vm._data = typeof data === 'function'
    ? getData(data, vm)
    : data || {}
    2. getData()
    data.call(vm, vm)
    3. proxy(vm, `_data`, key)
    4. proxy函数
      export function proxy (target: Object, sourceKey: string, key: string) {
        sharedPropertyDefinition.get = function proxyGetter () {
          return this[sourceKey][key]
        }
        sharedPropertyDefinition.set = function proxySetter (val) {
          this[sourceKey][key] = val
        }
        Object.defineProperty(target, key, sharedPropertyDefinition)
      }
    ```
    initProvide(vm) // resolve provide after 
    callHook(vm, 'created')
5. vm.$mount(vm.$options.el)
# initMixin(Vue)===>_init
# stateMixin(Vue)
```js
$data、$props、$set、$delete、$watch
```
# eventsMixin(Vue)
```js
$on 、$off、$once、$emit
```
# lifecycleMixin(Vue)
```js
_update、$forceUpdate、$destroy
```
# renderMixin(Vue)
```js
$nextTick _render
```