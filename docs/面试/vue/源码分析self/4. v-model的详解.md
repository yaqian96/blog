---
title: v-model
date: 2021-08-02
categories:
  - vue
tags:
  - vue
---
# 1. v-model一般用于表单,表单输入和应用状态之间的双向绑定。
`表单的使用以<input > <textarea> <select>为核心。`
限制：对于要求 IME （如中文、 日语、 韩语等） 的语言，你会发现v-model不会在 ime 构成中得到更新。如果你也想实现更新，请使用input事件。
修饰符.lazy .number .trim
```js
export function toNumber (val: string): number | string {
  const n = parseFloat(val)
  return isNaN(n) ? val : n
}
```
```js
addProp()
addHandler()
在 input 上动态绑定了 value，又给 el 添加了事件处理，
```
# 2. 用于组件上
配置子组件接收的 prop 名称，以及派发的事件名称。
# 3.手动实现v-model
```js
1. 子组件
<template>
  <div>
      <input type="text" :value="value" @input="$emit('input',$event.target.value)">
  </div>
</template>
<script type="text/javascript">
export default {
  name: "",
  props:{
    value:{
        type: String,
        defalut () 
            return ''
        }
    }
  },
  data() {
    return {

    }
  },
  components: {
  }
}
</script>
2. 父组件
<template>
  <div class="">
      <p>{{name}}</p>
      <son v-model="name"></son>
      <!-- 等同于下面 -->
      <!-- <son type="text" :value="name" @input="name=子组件传回来的值"> -->
</div>
</template>

<script type="text/javascript">
import Son from './son'
export default {
  name: "",
  data() {
    return {
        name:'ydw',
    }
  },
  components: {
      Son
  }
}
</script>
```
# 4.input 输入框， 绑定计算属性时，没法双向响应，可以和value绑定，再通过input事件，获取dom的value。
  1. 使用computed
  2. 使用v-model和wacth
  3. 使用computed的get和set