---
title: 前端工程化
date: 2021-08-20
categories:
  - 打包工具
tags:
  - 打包工具
---
# 1. 工程化的本质
```js
代码规范、分支管理、模块管理、自动化测试、构建、部署。
```
# 2. 工程化构建工具
```js
1. Grunt
基于任务执行的，它通过加载各种任务实现特定的功能
  1. 配置任务参数
  2. 配置执行的任务
  grunt-contrib-jshint js语法检查
  grunt-contrib-uglify 压缩，采用UglifyJS
  grunt-contrib-concat 合并文件
2. Gulp
  1. 任务化
  2. 基于流(数据流io:input/output)操作
  3. 整个操作都是基于数据流进行操作
  4. 具备属于gulp的内存，所有的操作全部在gulp的内存当中
  5. 对应着输入流和输出流。会将数据通过src方法输入，通过dest方法输出。
  6. 简易的API
3. rollup
Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码
  1. ES模块
  2. tree-shaking
 rollup-plugin-node-resolve 查找外部模块
 rollup-plugin-commonjs 将commonJS转换成es模块
 rollup-plugin-babel
4. Webpack
5. Browserify 
基于流
Node模块化浏览器加载，在浏览器下可以使用require.js 加载js代码，通过预编译让前端使用Node中的API
6. parcel
  过程：构建资源树、构建bundle树，打包
  1. 零配置，无需安装插件 
  2. 热模块重载
  3. 内置支持js、css、html资源等
```
# Babel
```js
1. 使用方法
   使用单体文件 (standalone script)
   命令行 (cli)
   构建工具的插件 (webpack 的 babel-loader, rollup 的 rollup-plugin-babel)。
2. 过程（babylon）
   1. 解析：将代码字符串解析成抽象语法树
   2. 转换：对抽象语法树进行变换操作
   3. 生成：根据变换后的抽象语法树再生成代码字符串
   语法插件
   转移插件
   preset：一组插件的组合针对Escript规范。
   "presets": [
    // 通过配置得知目标环境的特点，然后只做必要的转换
    ["env", {
      "targets": {
        "browsers": ["last 2 versions", "safari >= 7"],
        "node": "6.10"
      },
      'modules':false //取值amd, umd, systemjs, commonjs
      },
    ]

    // 不带配置项，直接列出名字
    "stage-2"  //当年最新规范的草案
  ]
  `抽象语法树`:
  1. 分词
  将整个代码字符串分割成语法单元数组
  tokens
  2. 语义分析
  在分词结果的基础之上分析语法单元之间的关系
  `栈`
3. 重要的部分
  1. babel-cli 可使用命令行安装依赖，执行打包等操作
  2. babel-node 是babel-cli的一部分，不需要单独安装 //在node环境上直接运行es2015的代码
  babel-node = babel-polyfill + babel-register
  3. babel-register
  模块改写 require 命令，为它加上一个钩子。此后，每当使用 require 加载 .js、.jsx、.es 和 .es6 后缀名的文件，就会先用 babel 进行转码。
  4. babel-polyfill  //将高版本js中的类型的实例方法进行转换
  5. babel-plugin-transform-runtime和babel-runtime
  .babelrc 中使用 babel-plugin-transform-runtime   package.json 中的 dependencies (注意不是 devDependencies) 又包含了 babel-runtime
  在使用 babel-plugin-transform-runtime 的时候必须把 babel-runtime 当做依赖。
    babel-runtime：
    1. core-js //转换一些内置类 (Promise, Symbols等等) 和静态方法 (Array.from 等)。
    2. regenerator //主要是 generator/yield 和 async/await 两组的支持。
    3. helpers //jsx, classCallCheck的转换
  6. babel-loader
  在代码构建之前对其进行转换
  7. babel-upgrade //babel的版本进行更新
4. babel7
   1. preset-->env
   2. 删除stage-0
   3. 删除polyfills -->core.js
   4. 包重命名
``` 