---
title: 智能重复函数
date: 2021-05-13
permalink: 
categories: 
  - 工具函数
tags: 
  - null 
---
```js
//'智能重复'函数---------3[2[ad]2[c]]  adadccadadccadadcc
//利用两个栈来存储，一个存储数字，一个存储字母
//当指针移动时，碰到数字，则进栈1，指针后移数字的长度加1，栈2推入空字符串
//当碰到是字符串时，则将字母入栈，指针后移字符串的长度。
//当碰到]时，栈1和栈2进行弹栈，栈2的字符串重复栈1弹出的数字的次数，并拼接到栈2的栈顶的位置。
 function smartRepeat(templater){
   var index=0;
   var stack1=[]; //存放数字
   var stack2=[];  //存放字母
   var rest=templater.length;
   while(index<templater.length-1){
      rest=templater.substring(index);
   if(/^\d+\[/.test(rest)){
        let times = Number(rest.match(/^(\d+)\[/)[1]);
        stack1.push(times);
        stack2.push('');   
        index += times.toString().length + 1;     
   }else if(/^\w+\]/.test(rest)){
         let word = rest.match(/^(\w+)\]/)[1];
         stack2[stack2.length - 1] = word;
         index += word.length;
   }else if(rest[0] == ']'){
        let times = stack1.pop();
        let word = stack2.pop();
        stack2[stack2.length - 1] += word.repeat(times);
        index++;
   }
  }
 return stack2[0].repeat(stack1[0]);
}                      
```