---
title: js 高级程序设计(4 版 4)
date: 2021-06-09
permalink:
categories:
  - js 高级程序设计
tags:
  - js 高级程序设计
---

# 25 客户端存储

## 25.1 cookie

## 25.2 web storage

## 25.3 IndexedDB

# 26 模块

## 1. 理解模块模式

```js
模块加载是“阻塞的”，模块加载是“阻塞的”，
- 异步依赖
`<script>`标签应用 defer 或 async 属性
- 动态依赖
- 静态分析
- 循环依赖
```

## 2. 凑合的模块系统

ES6 之前的模块有时候会使用函数作用域和立即调用函数表达式（ IIFE， Immediately Invoked Function Expression）将模块定义封装在匿名闭包中。
`泄露模块模式`

## 3. 使用 ES6 之前的模块加载器

```js
1. CommonJS---以服务器端为目标环境，能够一次性把所有模块都加载到内存
CommonJS 规范概述了同步声明依赖的模块定义
var moduleB = require('./moduleB');
module.exports = {
stuff: moduleB.doStuff();
};
模块第一次加载之后会缓存
2. 异步模块定义---以浏览器为目标执行环境，这需要考虑网络延迟的问题
AMD 模块实现的核心是用函数包装模块定义
define('moduleA', ['moduleB'], function(moduleB) {
  return {
  stuff: moduleB.doStuff();
  };
});
3. 通用模块定义
统一 CommonJS 和 AMD 生态系统，通用模块定义（ UMD， Universal Module Definition）规范应运而生。
在模块启动时，自适应选择配置
```

## 4. 使用 ES6 模块

```js
<script type="module">
// 模块代码
</script>
会立即下载模块文件，但执行会延迟到文档解析完成
import export
--------------------- 模块转移导出-------------------

```
