---
title: 常用的工具
date: 2021-6-29
permalink: 
categories: 
  - 项目配置
tags: 
  - 项目配置
---
1. 日期格式化
moment.js   //在node和浏览器上运行
2. 日期选择器
vue-datePicker    datePicker.js
3. VueProgressBar 
顶部加载栏
4.VueAwesomeSwiper
轮播图
5. v-drag指令
```js
/**
 * 传参举例
 * {
 *  handler: handleDrag,
 *  limit: {y: [0, 1920]}
 * }
   <div class="move-bar" v-drag-x="{
      limit: {x: [355, 800]},
      handler: dragHandle
    }">
    </div>
 */
import Vue from 'vue'
// import { countScale } from '@/utils'

let doMove = (el, binding, direction) => {
  el.style.cursor = 'move'
  el.setAttribute('draggable', false)
  el.onmousedown = (dom) => {
    // 算出鼠标相对元素的位置
    let initLeft = el.offsetLeft
    let initTop = el.offsetTop
    let movStartLeft = dom.clientX
    let movStartTop = dom.clientY
    // let scal = countScale()
    let scal = 1
    document.onmousemove = (e) => {
      // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置
      let left = (e.clientX - movStartLeft) / scal
      let top = (e.clientY - movStartTop) / scal
      let positionLeft = initLeft
      let positionTop = initTop
      // 是否传入限制
      let limit = binding.value.limit || {}
      let limitX = limit.x || []
      let limitY = limit.y || []
      let x = initLeft + left
      let y = initTop + top
      let leftVal = (limitX[0] || limitX[0] === 0) ? Math.max(x, limitX[0]) : x
      leftVal = (limitX[1] || limitX[1] === 0) ? Math.min(leftVal, limitX[1]) : leftVal
      let topVal = (limitY[0] || limitY[0] === 0) ? Math.max(y, limitY[0]) : y
      topVal = (limitY[1] || limitY[1] === 0) ? Math.min(topVal, limitY[1]) : topVal
      // 是否是一维拖动
      if (direction === 'x') {
        positionLeft = leftVal
      } else if (direction === 'y') {
        positionTop = topVal
      } else {
        positionLeft = leftVal
        positionTop = topVal
      }
      el.style.left = positionLeft + 'px'
      el.style.top = positionTop + 'px'
      if (typeof binding.value === 'function') {
        binding.value({
          el: e,
          status: 'draging',
          left: positionLeft,
          top: positionTop
        })
      } else if (binding.value && typeof binding.value.handler === 'function') {
        binding.value.handler({
          el: e,
          status: 'draging',
          left: positionLeft,
          top: positionTop
        })
      }
    }
    // 当鼠标松开，且未触发onmouseup时
    document.onmouseup = () => {
      document.onmousemove = null
      document.onmouseup = null
      if (typeof binding.value === 'function') {
        binding.value({
          el: dom,
          status: 'dragend'
        })
      }
    }
  }
}

Vue.directive('drag', {
  bind (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding)
    }
  },
  update (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding)
    } else {
      el.style.cursor = 'default'
      el.onmousedown = null
    }
  }
})
Vue.directive('drag-x', {
  bind (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding, 'x')
    }
  },
  update (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding, 'x')
    } else {
      el.style.cursor = 'default'
      el.onmousedown = null
    }
  }
})
Vue.directive('drag-y', {
  bind (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding, 'y')
    }
  },
  update (el, binding) {
    if (binding.value) {
      el.style.position = 'absolute'
      doMove(el, binding, 'y')
    } else {
      el.style.cursor = 'default'
      el.onmousedown = null
    }
  }
})
```
6. contextmenu属性
右击显示上下文菜单
```html
<div contextmenu="mymenu">

<menu type="context" id="mymenu">
  <menuitem label="Refresh"></menuitem>
  <menuitem label="Twitter"></menuitem>
</menu>

</div>
```
