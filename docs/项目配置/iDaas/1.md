---
title: idass 项目
date: 2021-10-09
permalink: "dd"
categories:

- idass
  tags:
- idass
---

# 1.nanoid id 唯一生成器

# 2. npm run lint --fix 格式化代码

# 3. 动态生成表单

```js
1. form - create官网;
2. js文件夹里动态生成表单
```

# 4. 装饰器

```js
1. 概念：< 函数+实参高阶函数+返回值高阶函数+嵌套函数+语法糖 = 装饰器 >
代码运行期间动态增加功能,不改变原功能的方式，称之为“装饰器”。返回函数的高阶函数。
2. 使用方法
  写在函数的上边,在执行函数之前。
3. 类型
   1. 类装饰器
      @log
    class MyClass { }

    function log(target) { // 这个 target 在这里就是 MyClass 这个类
      target.prototype.logger = () => `${target.name} 被调用`
    }

    const test = new MyClass()
    test.logger() // MyClass 被调用
   2. 属性或方法的装饰
   class C {
      @readonly(false)
      method() { console.log('cat') }
    }

    function readonly(value) {
      return function (target, key, descriptor) {
        /**
        * 此处 target 为 C.prototype;
        * key 为 method;
        * 原 descriptor 为：{ value: f, enumarable: false, writable: true, configurable: true }
        */
        descriptor.writable = value
        return descriptor
      }
    }

    const c = new C()
    c.method = () => console.log('dog')

    c.method() // cat
```

# 5. vuex 的 modules

```js
1. 模块的局部状态
2. 命名空间
当模块被注册后，它的所有 getter、action 及 mutation 都会自动根据模块注册的路径调整命名
3. createNamespacedHelpers 创建基于某个命名空间辅助函数
4. 模块的动态注册

```

# 6. 表格

```js
将所有的搜索条件打包成一个对象或者数组，进行查询
```

# 7.代码规范

```js
避免使用
1. alert
2. arguments.callee和arguments.caller
3. argument 不能被直接使用，得先结构出来
4. async 与return await 搭配使用无意义,只能使用在promise
5. catch语句不仅仅是重新抛出错误
6. continue 尽量在循环中不使用
7. switch case 语句中，default是最后一个。避免嵌套
8. delete 只用于删除对象的属性
9. for of 用于可迭代对象  数组
10. for in 遍历是本身和继承的属性，在循环时通过hasOwnProperty来进行过滤
11. 关键词 await class const enum export extends implements import  interface  let package private protected public static super yield
12. "if ... else if" constructs should end with "else" clauses
13. "in" 不应该被用于基本类型中
14. arr.indexOf("blue") >= 0     使用>=0来判断数组是否中是否存在或者includes
15. NaN 不应该用于比较，isNaN
16. new 使用到构造函数
17. strict模式严格使用
```

# 8. 通过路径动态引入组件 require.context()

```js
const ctx = require.context("@/components/", true, /index\.vue$/);
const componentArr = [];
for (const key of ctx.keys()) {
  componentArr.push(ctx(key).default);
}
```

# 9. api.js

```js
import axios from "./axios";

function isObject(obj) {
  return Object.prototype.toString.call(obj) === "[object Object]";
}
class CreateAPI {
  constructor(options) {
    this.api = {};
    const { config } = options;

    console.log("api config", config);

    config.forEach((e) => {
      this._apiBuilder({
        namespace: e.moduleName,
        apiList: e.module,
      });
    });

    return this.api;
  }

  _apiBuilder({ namespace, apiList }) {
    if (!this.api[namespace]) {
      this.api[namespace] = {};
    }

    apiList.forEach((e) => {
      let { name, method, url, params = {} } = e;

      method = method.toLowerCase();

      this.api[namespace][name] = (paramsObj = {}, options = {}, urlConfig) => {
        const key = method === "get" ? "params" : "data";

        options[key] = isObject(paramsObj)
          ? { ...params, ...paramsObj }
          : paramsObj;

        let resetUrl = url;
        if (urlConfig && isObject(urlConfig)) {
          Object.keys(urlConfig).forEach((key) => {
            resetUrl = resetUrl.replace(`:${key}`, urlConfig[key]);
          });
        }
        return axios({ ...options, method, url: resetUrl });
      };
    });
  }
}

function getModules() {
  const modulesContext = require.context("../service/api", true, /\.js$/);
  const regFilename = /^\.\/([^\s]+)\.js$/;
  return modulesContext.keys().map((modulesPath) => {
    // 给api分模块
    const lastNameArr = modulesPath.match(regFilename)[1].split("/");
    return {
      moduleName: lastNameArr[lastNameArr.length - 1],
      module: modulesContext(modulesPath).default,
    };
  });
}

export default new CreateAPI({
  config: getModules(),
});
```

# 10.动态根据上下元素获取 dom 高度

```js
 screenHeightCalc: debounce((el, binding, vnode) => {
    const bottom = binding.value || 10
    const key = binding.arg || 'height'
    const screen = document.documentElement.clientHeight
    const domRect = el.getBoundingClientRect()
    const h = screen - bottom - domRect.top
    console.log(screen, domRect, binding)
    vnode.context[key] = h
  }, 300),
```

# 11. form 动态表单
