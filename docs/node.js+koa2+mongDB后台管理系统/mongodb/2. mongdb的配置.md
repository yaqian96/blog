---
title: node.js+koa2+mongDB 后台管理系统--mongodb配置
date: 2022-02-08
categories:
  - mongodb
tags:
  - mongodb
---

首先配置新建环境变量，
右键（计算机）- 属性 - 高级系统设置 - 环境变量 - 编辑（系统变量【Path】）- 新建（MongoDB 安装后的 bin 目录【例: D:\Program Files\MongoDB\Server\5.0\bin】）

# 进入 admin 集合，创建超级管理员用户

## 1. 使用命令进入 mongo 运行环境

mongo

## 2. 查看当前已有的数据集合

> show dbs
> admin 0.000GB
> config 0.000GB
> local 0.000GB

## 3. 进入 admin 集合

创建数据库 use runoob(刚创建的数据库 show dbs 展示不出来，需要对数据库插入一些数据 db.runoob.insert({"name":"菜鸟教程"}))
删除数据库 db.dropDatabase()

> use admin
> switched to db admin

## 4.创建人员

> db.createUser({

    user: "admin",
    pwd: "123456",
    roles: ["root"]

})
Successfully added user: { "user" : "admin", "roles" : [ "root" ] }

## 5.查看创建的管理员信息

> show users
> {

        "_id" : "admin.admin",
        "userId" : UUID("71c0e253-7114-4eae-86da-ec30ef1cdc7b"),
        "user" : "admin",
        "db" : "admin",
        "roles" : [
                {
                        "role" : "root",
                        "db" : "admin"
                }
        ],
        "mechanisms" : [
                "SCRAM-SHA-1",
                "SCRAM-SHA-256"
        ]

}

## 6.验证管理员账号 【为 1 则是验证通过】

> db.auth("admin","123456")
> 1

## 7.退出命令操作工具，开启 MongoDB 权限认证登录

# 修改数据库配置，开启数据库访问权限验证

MongoDB 数据库的相关配置信息，是存储在 mongodb 安装目录 bin 目录中的 mongod.cfg 文件中

```js
#开启数据库访问权限验证(注意：换行、缩进格式)
security:
  authorization: enabled
```

# 重启 mongo 服务

此电脑(计算机) 右键 -> 管理 -> 服务和应用程序 -> 服务 -> MongoDB Server (MongoDB) -> 右键 点击 重新启动(E）或 点击左侧的（重启动此服务）

# 使用超级管理员账号连接数据库

重新启动 MongoDB 服务以后，现在使用 mongo 命令链接数据库，查看集合 show dbs 会没有任何返回，这时需要使用已创建的管理员账号进行登录运行

## 8.使用管理员账号信息进行登录（注意连接本地数据库和远程数据的区别，直接打开命令框进行输入下边指令）

# 连接【本地】MongoDB 数据库（不用指定 绑定 IP 和 端口号）

> mongo -u admin -p 123456

# 连接【远程】MongoDB 数据库（必须指定 绑定 IP 和 端口号）

> mongo 127.0.0.1:27017/admin -u admin -p 123456

# 创建数据库【test】，进入【test】并创建账户

```
> use test
> db.test.insert({name:"33"})
# 为test新增管理员用户
> db.createUser({
    user: "test",
    pwd: "123456",
    roles: ["readWrite"]
})
# 验证
> db.auth("test","123456")
1
```

# 使用可视化工具管理数据库

https://www.mongodb.com/try/download/tools 下载安装
